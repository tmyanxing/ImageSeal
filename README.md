# ImageSeal - å›¾ç‰‡æ°´å°å·¥å…·

> ä¸€æ¬¾ç®€å•æ˜“ç”¨çš„å›¾ç‰‡æ°´å°æ·»åŠ å·¥å…·ï¼Œæ”¯æŒè‡ªå®šä¹‰æ°´å°æ–‡å­—ã€é¢œè‰²ã€é€æ˜åº¦ã€è§’åº¦ç­‰å‚æ•°ï¼Œç”Ÿæˆæ–œå‘é‡å¤çš„é€æ˜æ°´å°æ•ˆæœã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

- âœ… ä¸Šä¼ å›¾ç‰‡å¹¶å®æ—¶é¢„è§ˆ
- âœ… è‡ªå®šä¹‰æ°´å°æ–‡å­—
- âœ… å¯è°ƒèŠ‚å­—ä½“å¤§å°ã€é¢œè‰²ã€é€æ˜åº¦
- âœ… å¯è°ƒèŠ‚æ°´å°æ—‹è½¬è§’åº¦ï¼ˆæ–œå‘æ•ˆæœï¼‰
- âœ… å¯è°ƒèŠ‚æ°´å°é—´è·
- âœ… ç”Ÿæˆé€æ˜é‡å¤æ°´å°
- âœ… ä¸€é”®ä¸‹è½½å¸¦æ°´å°çš„å›¾ç‰‡
- âœ… æ”¯æŒæ‰“åŒ…æˆç‹¬ç«‹ EXE ç¨‹åº

## ğŸ–¼ï¸ ç•Œé¢é¢„è§ˆ

åº”ç”¨ç•Œé¢åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼š
- **å·¦ä¾§**ï¼šä¸Šä¼ å›¾ç‰‡å’Œæ°´å°è®¾ç½®
- **å³ä¾§**ï¼šæ°´å°æ•ˆæœé¢„è§ˆå’Œä¸‹è½½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- .NET 8.0 SDK
- Windows 10/11ï¼ˆå¦‚éœ€æ‰“åŒ… EXEï¼‰

### å¼€å‘æ¨¡å¼

1. **å®‰è£…å‰ç«¯ä¾èµ–**
   ```bash
   cd frontend/imageseal-ui
   npm install
   ```

2. **ä¸€é”®å¯åŠ¨å‰åç«¯**
   - æŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
   - è¾“å…¥ `Tasks: Run Task`
   - é€‰æ‹© `ğŸš€ å¯åŠ¨å…¨æ ˆåº”ç”¨ (å‰ç«¯+åç«¯)`
   
   æˆ–è€…æ‰‹åŠ¨å¯åŠ¨ï¼š
   ```bash
   # ç»ˆç«¯1: å¯åŠ¨åç«¯
   cd backend/ImageSeal.Api
   dotnet run

   # ç»ˆç«¯2: å¯åŠ¨å‰ç«¯
   cd frontend/imageseal-ui
   npm run dev
   ```

3. **è®¿é—®åœ°å€**
   - å‰ç«¯å¼€å‘æœåŠ¡å™¨: http://localhost:3000
   - åç«¯ API: http://localhost:5000
   - Swagger æ–‡æ¡£: http://localhost:5000/swagger

### ç”Ÿäº§æ¨¡å¼

1. **æ„å»ºå‰ç«¯**
   ```bash
   cd frontend/imageseal-ui
   npm run build
   ```
   æ„å»ºäº§ç‰©ä¼šè‡ªåŠ¨è¾“å‡ºåˆ° `backend/ImageSeal.Api/wwwroot` ç›®å½•

2. **è¿è¡Œåç«¯**
   ```bash
   cd backend/ImageSeal.Api
   dotnet run
   ```

3. **è®¿é—®åº”ç”¨**
   æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5000 å³å¯ä½¿ç”¨å®Œæ•´åº”ç”¨

## ğŸ“¦ æ‰“åŒ…æˆ EXE

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ VSCode Taskï¼ˆæ¨èï¼‰

1. æŒ‰ `Ctrl+Shift+P` æ‰“å¼€å‘½ä»¤é¢æ¿
2. è¾“å…¥ `Tasks: Run Task`
3. é€‰æ‹© `ğŸ”¨ æ‰“åŒ…æˆ EXE (Windows x64)`
4. ç­‰å¾…æ‰“åŒ…å®Œæˆï¼ŒEXE æ–‡ä»¶ä½äº `publish` ç›®å½•

### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œæ‰“åŒ…

```bash
# 1. å…ˆæ„å»ºå‰ç«¯
cd frontend/imageseal-ui
npm run build

# 2. æ‰“åŒ…åç«¯ä¸ºå•æ–‡ä»¶ EXE
cd ../../backend/ImageSeal.Api
dotnet publish -c Release -r win-x64 --self-contained true -p:PublishSingleFile=true -p:IncludeNativeLibrariesForSelfExtract=true -o ../../publish
```

### è¿è¡Œ EXE

1. è¿›å…¥ `publish` ç›®å½•
2. åŒå‡»è¿è¡Œ `ImageSeal.exe`
3. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5000

## ğŸ“ é¡¹ç›®ç»“æ„

```
ImageSeal/
â”œâ”€â”€ .vscode/                    # VSCode é…ç½®
â”‚   â””â”€â”€ tasks.json             # ä»»åŠ¡é…ç½®
â”œâ”€â”€ backend/                    # åç«¯é¡¹ç›®
â”‚   â””â”€â”€ ImageSeal.Api/         # ASP.NET Core Web API
â”‚       â”œâ”€â”€ Controllers/       # API æ§åˆ¶å™¨
â”‚       â”‚   â””â”€â”€ WatermarkController.cs
â”‚       â”œâ”€â”€ Models/            # æ•°æ®æ¨¡å‹
â”‚       â”‚   â””â”€â”€ WatermarkModels.cs
â”‚       â”œâ”€â”€ Services/          # ä¸šåŠ¡æœåŠ¡
â”‚       â”‚   â””â”€â”€ WatermarkService.cs
â”‚       â”œâ”€â”€ Program.cs         # å…¥å£ç¨‹åº
â”‚       â”œâ”€â”€ appsettings.json   # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ wwwroot/           # é™æ€æ–‡ä»¶ï¼ˆå‰ç«¯æ„å»ºè¾“å‡ºï¼‰
â”œâ”€â”€ frontend/                   # å‰ç«¯é¡¹ç›®
â”‚   â””â”€â”€ imageseal-ui/          # Vue 3 é¡¹ç›®
â”‚       â”œâ”€â”€ src/               # æºä»£ç 
â”‚       â”‚   â”œâ”€â”€ api/          # API æ¥å£
â”‚       â”‚   â”œâ”€â”€ App.vue       # æ ¹ç»„ä»¶
â”‚       â”‚   â””â”€â”€ main.js       # å…¥å£æ–‡ä»¶
â”‚       â”œâ”€â”€ public/           # é™æ€èµ„æº
â”‚       â”œâ”€â”€ index.html        # HTML æ¨¡æ¿
â”‚       â”œâ”€â”€ package.json      # ä¾èµ–é…ç½®
â”‚       â””â”€â”€ vite.config.js    # Vite é…ç½®
â”œâ”€â”€ publish/                    # EXE å‘å¸ƒç›®å½•
â””â”€â”€ README.md
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- ASP.NET Core 8.0
- SixLabors.ImageSharp (å›¾åƒå¤„ç†)
- SixLabors.ImageSharp.Drawing (æ°´å°ç»˜åˆ¶)

### å‰ç«¯
- Vue 3
- Vite 7
- Ant Design Vue 4
- Axios

## ğŸ“ API æ–‡æ¡£

å¯åŠ¨åç«¯åè®¿é—® http://localhost:5000/swagger æŸ¥çœ‹å®Œæ•´ API æ–‡æ¡£

### æ°´å°æ¥å£

#### æ·»åŠ æ°´å°

```
POST /api/watermark/add
Content-Type: multipart/form-data

å‚æ•°:
- file: å›¾ç‰‡æ–‡ä»¶ (å¿…å¡«)
- watermarkText: æ°´å°æ–‡å­— (å¿…å¡«)
- fontSize: å­—ä½“å¤§å° (é»˜è®¤: 30)
- color: æ°´å°é¢œè‰² (é»˜è®¤: #888888)
- opacity: é€æ˜åº¦ 0-100 (é»˜è®¤: 30)
- angle: æ—‹è½¬è§’åº¦ (é»˜è®¤: -30)
- spacing: æ°´å°é—´è· (é»˜è®¤: 100)

è¿”å›:
{
  "success": true,
  "message": "æ°´å°æ·»åŠ æˆåŠŸ",
  "data": {
    "imageBase64": "...",
    "mimeType": "image/png",
    "fileName": "image_watermarked.png"
  }
}
```

#### å¥åº·æ£€æŸ¥

```
GET /api/watermark/health

è¿”å›:
{
  "success": true,
  "message": "æœåŠ¡æ­£å¸¸è¿è¡Œ",
  "data": "OK"
}
```

## ğŸ¯ VSCode Tasks è¯´æ˜

| ä»»åŠ¡åç§° | è¯´æ˜ |
|---------|------|
| ğŸš€ å¯åŠ¨å…¨æ ˆåº”ç”¨ (å‰ç«¯+åç«¯) | åŒæ—¶å¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨ |
| å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ | ä»…å¯åŠ¨å‰ç«¯ (ç«¯å£ 3000) |
| å¯åŠ¨åç«¯APIæœåŠ¡ | ä»…å¯åŠ¨åç«¯ (ç«¯å£ 5000) |
| ğŸ“¦ æ„å»ºå‰ç«¯å¹¶å‘å¸ƒåˆ°åç«¯ | æ„å»ºå‰ç«¯å¹¶è¾“å‡ºåˆ° wwwroot |
| ğŸ¯ è¿è¡Œåç«¯ï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰ | ä»¥ Release æ¨¡å¼è¿è¡Œåç«¯ |
| ğŸ”¨ æ‰“åŒ…æˆ EXE (Windows x64) | æ‰“åŒ…æˆç‹¬ç«‹ EXE ç¨‹åº |
| ğŸ“¥ å®‰è£…å‰ç«¯ä¾èµ– | å®‰è£…å‰ç«¯ npm ä¾èµ– |

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: EXE æ–‡ä»¶å¾ˆå¤§æ€ä¹ˆåŠï¼Ÿ
A: ç”±äºä½¿ç”¨äº† `--self-contained` å‚æ•°ï¼ŒEXE åŒ…å«äº†å®Œæ•´çš„ .NET è¿è¡Œæ—¶ï¼Œæ–‡ä»¶è¾ƒå¤§æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœç›®æ ‡æœºå™¨å·²å®‰è£… .NET 8 è¿è¡Œæ—¶ï¼Œå¯ä»¥å»æ‰æ­¤å‚æ•°å‡å°ä½“ç§¯ã€‚

### Q: æ°´å°å­—ä½“ä¸æ­£ç¡®ï¼Ÿ
A: ç¨‹åºä¼šä¼˜å…ˆä½¿ç”¨å¾®è½¯é›…é»‘å­—ä½“ï¼Œå¦‚æœç³»ç»Ÿæ²¡æœ‰è¯¥å­—ä½“ï¼Œä¼šå›é€€åˆ° Arialã€‚

### Q: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ
A: æ”¯æŒ JPGã€PNGã€GIFã€BMPã€WebP æ ¼å¼çš„å›¾ç‰‡ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ImageSeal** - è®©æ°´å°æ·»åŠ å˜å¾—ç®€å•ï¼ ğŸ¨
